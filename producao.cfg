[buildout]
parts +=
    zeo
    instance-debug
    supervisor

extends = buildout.cfg

[zeo]
recipe = plone.recipe.zeoserver
zeo-address = 127.0.0.1:8100
blob-storage = ${instance:blob-storage}
monitor-address = 127.0.0.1:12098
eggs =
      ZopeUndo
      plone.app.blob

[instance]
recipe = plone.recipe.zope2instance
debug-mode = off
verbose-security = off
shared-blob = on
zeo-client = on
zeo-address = ${zeo:zeo-address}

[instance-debug]
<=instance
port-base = 1
debug-mode = on
verbose-security = on
zserver-threads = 1

[supervisor]
recipe = collective.recipe.supervisor
plugins =
    superlance
port = 9004
user = apyb
password = pass
serverurl = http://www.pythonbrasil.org.br:9004
programs =
    10 zeo      ${zeo:location}/bin/runzeo ${zeo:location} true
    20 instance ${buildout:directory}/bin/instance ${buildout:directory} true
eventlisteners =
    Memmon TICK_60 ${buildout:bin-directory}/memmon [-p instance=400MB]
    HttpOk TICK_60 ${buildout:bin-directory}/httpok [-p pythonbrasil -t 20 http://localhost:8045/]
